# Changelog

本项目的所有重要更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## Unreleased

### Changed
- 优化健康检查功能
  * 增强健康检查端点，添加目录权限检查
  * 优化健康检查日志级别，降低日志量
  * 调整Docker容器健康检查配置，优化检查频率
  * 只在健康状态变化时记录日志
  * 完善错误处理和状态报告
  * 修复日志初始化顺序问题
  * 配置uvicorn日志级别为info
  * 根据环境变量自动设置应用日志级别（production: INFO, 其他: DEBUG）

## [1.1.2] - 2025-01-05
### Changed
- 统一环境变量配置管理
  * 移除 .env.production 文件，统一使用 .env 文件
  * 优化环境变量加载逻辑，简化配置管理
  * 更新 Docker Compose 配置，统一使用 .env 文件
  * 改进配置文件挂载方式
  * 完善配置加载错误处理和日志记录

## [1.1.1] - 2024-12-29
### Added
- 集成百度统计
  * 添加百度统计代码，实现网站访问数据分析
  * 支持实时访问量统计和用户行为分析

### Changed
- 优化首页标题样式
  * 增大字体到 56px 并加粗到 800
  * 添加渐变色效果，从主色调到绿色过渡
  * 添加装饰性底部线条和右上角装饰点
  * 优化移动端适配，自动调整尺寸和间距
  * 改进视觉层次和可读性
- SEO优化
  * 优化meta标签配置，在构建时注入环境变量
  * 添加Open Graph协议支持，优化社交媒体分享效果
- 增加favicon
  * 设计并添加网站图标，提升品牌识别度
  * 优化图标在不同设备上的显示效果

## [1.1.0] - 2024-12-29
### Added
- 新增小红书标题生成功能
- 新增名言引用区块："跑步让平凡的日子也能亮起来。" —— 村上春树
- 新增复制和下载功能，支持一键复制和下载生成的标题
- 新增粘性定位的操作栏，滚动时保持在顶部便于操作

### Changed
- 优化公众号文章功能
  * 优化prompt
  * 将之前3次API请求，优化为1次API请求
- 优化项目结构
  * 移动 requirements.txt 到 backend 目录
  * 删除未使用的 Dockerfile 文件
  * 删除空的 scripts 目录
  * 更新文档以反映最新的项目结构
  * 日志输出到 logs/app 目录
- 优化前端项目结构
  * 重构组件目录结构，分离页面组件和功能组件
  * 将页面级组件移动到 views 目录
  * 优化组件命名规范，页面组件添加 View 后缀
  * 完善路由配置，使用更合理的路由结构
  * 优化组件间的数据传递方式

### Fixed
- API 请求优化
  * 简化 API 请求流程，去处写作方向和标题单独api请求的逻辑
  * 修复缓存相关 bug
  * 优化错误处理逻辑
  * 改进请求重试机制

## [1.0.1] - 2024-12-28
### Added
- 支持预览环境
  * docker-compose.pre.yml支持上线前的预览环境部署搭建
  * 优化预览环境资源配置,调整容器CPU和内存限制
  * 增加Node.js内存限制到3GB,确保大型项目构建不会出现内存问题
  * 优化后端服务配置,增加健康检查和重启策略
  * 完善日志管理,统一配置json-file驱动和日志轮转
  * 添加volume挂载配置,支持日志和输出文件持久化
  * 配置预览环境专用网络,实现容器间安全通信

### Fixed
- 修复前端构建错误
  * 添加terser依赖安装步骤
  * 优化npm配置，使用阿里云镜像源
  * 调整构建命令顺序
- 修复nginx权限问题
  * 移除nginx.conf中的user指令
  * 调整pid文件位置到/tmp/nginx目录
  * 优化容器内目录权限设置
  * 统一在Dockerfile中设置运行用户

## [1.0.1] - 2024-12-27
### Added
- 配置管理优化
  * 实现配置类的单例模式
  * 优化配置加载和验证逻辑
  * 添加详细的配置日志记录
- 多AI提供商支持
  * 支持Monica AI和智谱AI
  * 实现AI提供商的动态切换
  * 优化API客户端工厂模式
  * 统一的API调用接口

### Changed
- 重构配置管理机制
  * 使用单例模式确保配置一致性
  * 优化配置验证和错误处理
  * 改进配置加载流程
- 优化API客户端实现
  * 统一使用配置单例
  * 改进日志记录
  * 完善错误处理

## [1.0.0] - 2024-12-26
### Added
- 部署上云
- 新增阿里云专用 Dockerfile
  * 添加 `backend_aliyun.Dockerfile` 使用阿里云镜像源
  * 添加 `frontend_aliyun.Dockerfile` 使用阿里云 Node 镜像
  * 添加 `nginx_aliyun.Dockerfile` 使用阿里云优化版 Nginx
  * 添加 `docker-compose.aliyun.yml` 用于阿里云环境部署
- 优化阿里云部署配置
  * 使用阿里云镜像仓库加速构建
  * 配置 npm 和 pip 使用阿里云镜像源
  * 优化容器资源限制配置
  * 完善日志管理配置

### Changed
- 调整构建配置适配阿里云环境
  * 更新包管理器从 apt 到 yum
  * 优化用户创建命令适配阿里云基础镜像
  * 调整文件权限和目录结构
  * 优化健康检查配置

## [0.3.0] - 2024-12-24
### Added
- Docker部署优化
  * 添加前后端独立的 `.dockerignore` 文件
  * 优化 Docker 构建上下文
  * 实现非root用户运行容器
  * 使用docker-compose管理容器
- 部署至aliyun

### Changed
- 调整 Docker 相关配置
  * 更新 Python 基础镜像到 3.11
  * 优化构建流程和文件组织
  * 分离前后端构建上下文
  * 删除根目录冗余的 `.dockerignore` 文件

## [0.2.0] - 2024-12-22

### Added
- 完成前端页面开发
  * 实现文章生成表单页面
  * 实现文章预览页面
  * 添加文章内容复制功能
  * 添加文章下载为Markdown功能
  * 添加返回编辑功能
- 完善前后端交互
  * 实现文章生成API调用
  * 添加错误处理和提示
  * 优化数据传递方式
- 文章展示功能
  * 支持Markdown渲染
  * 优化代码块显示
  * 添加写作方向卡片展示
  * 优化排版和间距

### Changed
- 重构路由结构，简化页面跳转逻辑
- 优化组件通信方式，采用props传递数据
- 改进错误处理机制
- 优化页面加载状态管理

## [0.1.2] - 2024-12-22

### Added
- 增强API文档功能
  * 添加详细的API请求/响应模型说明
  * 添加字段级别的验证规则和说明
  * 添加示例数据
  * 完善错误响应模型
- 优化数据模型结构
  * 添加基础响应模型（BaseResponse）
  * 添加统一的错误处理模型
  * 规范化API响应格式

### Changed
- 项目代码重构，将现有Python代码迁移到`backend`目录
- 将 `controllers` 目录重命名为 `routers`，更符合FastAPI最佳实践
- 优化 `schemas` 目录结构，增强数据验证
- 更新项目文档，完善目录结构说明
- 删除未实现的预览功能相关代码
- API 调用重试机制
- 日志记录系统

## [0.1.0] - 2024-12-20

### Added
- 项目初始化
- 基础项目结构搭建
- README.md 文档
- 配置文件支持
- 环境变量管理
- API 客户端封装
- 文章生成器核心类
