# AI æ–‡ç« ç”Ÿæˆå™¨ v0.2.0

è¿™æ˜¯ä¸€ä¸ªåŸºäºMonica AIçš„æ™ºèƒ½æ–‡ç« ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·æä¾›çš„æè¿°å’Œæ ¸å¿ƒä¸»é¢˜è‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„æ–‡ç« ã€‚

## æœ€æ–°æ›´æ–°

- âœ¨ å…¨æ–°çš„ç”¨æˆ·ç•Œé¢ï¼Œé‡‡ç”¨ç®€æ´å‹å¥½çš„è®¾è®¡é£æ ¼
- ğŸ“ æ”¯æŒä¸€é”®å¤åˆ¶å’Œä¸‹è½½æ–‡ç« 
- ğŸ¨ ä¼˜åŒ–çš„æ–‡ç« å±•ç¤ºæ•ˆæœ
- ğŸ“± å®Œå–„çš„ç§»åŠ¨ç«¯é€‚é…
- ğŸš€ æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ
- ğŸ”’ Docker-composeéƒ¨ç½²

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸš€ è‡ªåŠ¨ç”Ÿæˆ3-5ä¸ªå†™ä½œæ–¹å‘
- ğŸ“ æ™ºèƒ½ç”Ÿæˆæ–‡ç« æ ‡é¢˜
- ğŸ“š ç”Ÿæˆ500-1000å­—çš„æ–‡ç« å†…å®¹
- ğŸ’¾ è‡ªåŠ¨ä¿å­˜ä¸ºMarkdownæ ¼å¼
- ğŸ”„ æ”¯æŒå¼‚æ­¥å¤„ç†æé«˜æ€§èƒ½
- ğŸ“¦ å†…ç½®ç¼“å­˜æœºåˆ¶å‡å°‘APIè°ƒç”¨
- ğŸ›¡ï¸ å®Œå–„çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ğŸ“Š è¯¦ç»†çš„æ—¥å¿—è®°å½•
- ğŸ“± å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ“‹ ä¸€é”®å¤åˆ¶æ–‡ç« å†…å®¹
- ğŸ’¾ ä¸‹è½½ä¸ºMarkdownæ–‡ä»¶
- ğŸ”„ æ”¯æŒè¿”å›ç¼–è¾‘åŠŸèƒ½

## æŠ€æœ¯æ ˆ
- å‰ç«¯ï¼šVue 3 + Vite + Element Plus + Pinia
- åç«¯ï¼šPython FastAPI
- å¼€å‘å·¥å…·ï¼šVSCode
- åŒ…ç®¡ç†ï¼šnpm(å‰ç«¯)ã€pip(åç«¯)
- å®¹å™¨åŒ–ï¼šDocker Compose

## ç¯å¢ƒè¦æ±‚
- Docker Compose >= 2.0.0
- VSCode + Remote Container æ’ä»¶(æ¨è Dev Container)

## é¡¹ç›®ç»“æ„

```
blog-by-desc/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py         # PythonåŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ main.py             # WebæœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ cli.py              # å‘½ä»¤è¡Œå·¥å…·å…¥å£
â”‚   â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–åŒ…
â”‚   â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                # ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ routers/            # è·¯ç”±å¤„ç†ç›®å½•
â”‚   â”‚   â””â”€â”€ article.py      # æ–‡ç« ç›¸å…³è·¯ç”±
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚ç›®å½•
â”‚   â”‚   â””â”€â”€ article_generator.py  # æ–‡ç« ç”ŸæˆæœåŠ¡
â”‚   â”œâ”€â”€ schemas/            # æ•°æ®éªŒè¯æ¨¡å‹ç›®å½•
â”‚   â”‚   â”œâ”€â”€ __init__.py     # åŒ…åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ article.py      # æ–‡ç« ç›¸å…³çš„æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ base.py         # åŸºç¡€æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ errors.py       # é”™è¯¯å“åº”æ¨¡å‹
â”‚   â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹ç›®å½•
â”‚   â”‚   â””â”€â”€ article.py      # æ–‡ç« æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°ç›®å½•
â”‚   â”‚   â””â”€â”€ logger.py       # æ—¥å¿—å·¥å…·
â”‚   â””â”€â”€ tests/              # æµ‹è¯•ç›®å½•
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ src/               # æºä»£ç ç›®å½•
â”‚   â”‚   â”œâ”€â”€ components/    # Vueç»„ä»¶ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ ArticleForm.vue    # æ–‡ç« ç”Ÿæˆè¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ArticlePreview.vue # æ–‡ç« é¢„è§ˆç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®ç›®å½•
â”‚   â”‚   â”‚   â””â”€â”€ index.js   # è·¯ç”±é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue        # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js        # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ css/               # æ ·å¼æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ js/                # JavaScriptæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ index.html         # HTMLå…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json       # é¡¹ç›®ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.js     # Viteé…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ .npmrc             # NPMé…ç½®æ–‡ä»¶
â”œâ”€â”€ output/                 # ç”Ÿæˆçš„æ–‡ç« è¾“å‡ºç›®å½•
â”œâ”€â”€ logs/                   # æ—¥å¿—è¾“å‡ºç›®å½•
â”œâ”€â”€ docker/                 # Dockerç›¸å…³é…ç½®
â””â”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶
```

### ç›®å½•åŠŸèƒ½è¯¦ç»†æè¿°

#### backend/routers
1. å¤„ç†HTTPè¯·æ±‚è·¯ç”±
2. å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†
3. è°ƒç”¨ç›¸åº”çš„æœåŠ¡å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘
4. è¿”å›å¤„ç†ç»“æœ

#### backend/schemas
1. å®šä¹‰è¯·æ±‚å’Œå“åº”çš„æ•°æ®æ¨¡å‹
2. æä¾›æ•°æ®éªŒè¯è§„åˆ™
   - å­—æ®µç±»å‹æ£€æŸ¥
   - é•¿åº¦é™åˆ¶
   - æ ¼å¼éªŒè¯
   - è‡ªå®šä¹‰éªŒè¯è§„åˆ™
3. è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£
   - è¯·æ±‚/å“åº”æ¨¡å‹è¯´æ˜
   - å­—æ®µè¯´æ˜
   - ç¤ºä¾‹æ•°æ®
4. é”™è¯¯å¤„ç†æ¨¡å‹
   - ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼
   - é”™è¯¯ç å®šä¹‰
   - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

#### backend/services
1. å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
2. è°ƒç”¨å¤–éƒ¨APIæœåŠ¡
3. å¤„ç†æ•°æ®è½¬æ¢
4. å®ç°ç¼“å­˜æœºåˆ¶

## å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°ï¼š
   ```bash
   git clone [é¡¹ç›®åœ°å€]
   cd blog-by-desc
   ```
2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   - å¤åˆ¶ `backend/.env.example` æ–‡ä»¶ä¸º `backend/.env`
   - åœ¨ `backend/.env` æ–‡ä»¶ä¸­è®¾ç½®ä½ çš„ Monica AI APIå¯†é’¥ï¼š
     ```
     MONICA_API_KEY=your_api_key_here
     ```

2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰ï¼š
   ```bash
   # Windows
   python -m venv venv
   .\venv\Scripts\activate

   # macOS/Linux
   python3 -m venv venv
   source venv/bin/activate
   ```

3. å®‰è£…ä¾èµ–åŒ…ï¼š
   ```bash
   cd backend
   pip install -r requirements.txt
   ```



## ä½¿ç”¨æ–¹æ³•

```cmd
# åç«¯æœåŠ¡å¯åŠ¨
uvicorn backend.main:app --reload

# å‰ç«¯æœåŠ¡å¯åŠ¨
cd frontend && npm run dev
```

### åç«¯æœåŠ¡å¯åŠ¨
æä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼šå‘½ä»¤è¡Œå·¥å…·å’ŒWeb APIæœåŠ¡ã€‚

#### 1. Web APIæœåŠ¡ä½¿ç”¨æ–¹æ³•

å¯åŠ¨WebæœåŠ¡ï¼š
```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆæ”¯æŒè‡ªåŠ¨é‡è½½ï¼‰
uvicorn backend.main:app --reload

# ç”Ÿäº§æ¨¡å¼å¯åŠ¨
uvicorn backend.main:app --host 0.0.0.0 --port 8000
```

#### 2. å‘½ä»¤è¡Œå·¥å…·ä½¿ç”¨æ–¹æ³•

é€šè¿‡å‘½ä»¤è¡Œç›´æ¥ç”Ÿæˆæ–‡ç« ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
python -m backend.cli <æ–‡ç« æè¿°> [æ ¸å¿ƒä¸»é¢˜]

# ç¤ºä¾‹
python -m backend.cli "æ¢è®¨äººå·¥æ™ºèƒ½å¯¹æœªæ¥æ•™è‚²çš„å½±å“" "AIæ•™è‚²é©å‘½"
```

å‚æ•°è¯´æ˜ï¼š
- `æ–‡ç« æè¿°`ï¼šï¼ˆå¿…éœ€ï¼‰æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„æ–‡ç« å†…å®¹
- `æ ¸å¿ƒä¸»é¢˜`ï¼šï¼ˆå¯é€‰ï¼‰æ–‡ç« çš„æ ¸å¿ƒä¸»é¢˜æˆ–å…³é”®è¯



## APIæ¥å£ï¼š

1. è®¿é—®APIæ–‡æ¡£ï¼š
   - Swagger UI: http://localhost:8000/docs
   - ReDoc: http://localhost:8000/redoc



## é…ç½®è¯´æ˜

åœ¨ `backend/config.py` ä¸­å¯ä»¥ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

### APIé…ç½®
```python
API_ENDPOINT = "https://openapi.monica.im/v1"  # Monica APIçš„åŸºç¡€URL
AI_MODEL = "gpt-4o-mini"                       # ä½¿ç”¨çš„AIæ¨¡å‹
API_TEMPERATURE = 0.7                          # æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ (0.0-1.0)
API_MAX_TOKENS = 2000                          # é™åˆ¶è¾“å‡ºçš„æœ€å¤§é•¿åº¦
MAX_RETRIES = 1                                # æœ€å¤§é‡è¯•æ¬¡æ•°
RETRY_DELAY = 2                                # é‡è¯•å»¶è¿Ÿæ—¶é—´ï¼ˆç§’ï¼‰
```

### æ—¥å¿—é…ç½®
```python
LOG_LEVEL = "INFO"         # æ—¥å¿—çº§åˆ«
LOG_FORMAT = "[%(asctime)s] [%(levelname)s] [%(name)s] %(message)s"  # æ—¥å¿—æ ¼å¼
```

## è¾“å‡ºè¯´æ˜

1. ç”Ÿæˆçš„æ–‡ç« å°†ä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ `output` ç›®å½•ä¸‹
2. æ–‡ä»¶åæ ¼å¼ï¼š`YYYYMMDDHHMM.md`
3. æ–‡ä»¶å†…å®¹åŒ…æ‹¬ï¼š
   - æ–‡ç« æ ‡é¢˜
   - å†™ä½œæ–¹å‘åˆ—è¡¨
   - æ­£æ–‡å†…å®¹

## æ—¥å¿—è¯´æ˜

- æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼šé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `logs` ç›®å½•
- æ—¥å¿—æ–‡ä»¶åæ ¼å¼ï¼š`YYYYMMDD.log`
- è®°å½•å†…å®¹ï¼š
  * APIè°ƒç”¨æƒ…å†µ
  * ç”Ÿæˆè¿›åº¦
  * é”™è¯¯ä¿¡æ¯

## æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. åœ¨é¡¹ç›® Issues ä¸­æäº¤é—®é¢˜
3. è”ç³»æŠ€æœ¯æ”¯æŒ

## è®¸å¯è¯

MIT License

## APIæ–‡æ¡£

### 1. æ–‡æ¡£è®¿é—®
- Swagger UI: http://localhost:8000/docs
  * äº¤äº’å¼APIæ–‡æ¡£
  * æ”¯æŒåœ¨çº¿æµ‹è¯•API
  * æŸ¥çœ‹è¯·æ±‚/å“åº”æ¨¡å‹
  * æŸ¥çœ‹éªŒè¯è§„åˆ™
- ReDoc: http://localhost:8000/redoc
  * æ›´æ¸…æ™°çš„æ–‡æ¡£é˜…è¯»ä½“éªŒ
  * é€‚åˆåˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜

### 2. è¯·æ±‚/å“åº”æ ¼å¼

#### 2.1 æ–‡ç« ç”Ÿæˆè¯·æ±‚
```json
{
    "description": "æ¢è®¨äººå·¥æ™ºèƒ½å¯¹æœªæ¥æ•™è‚²çš„å½±å“",
    "core_idea": "AIæ•™è‚²é©å‘½"
}
```
- `description`: æ–‡ç« æè¿°ï¼ˆå¿…å¡«ï¼Œ5-1000å­—ï¼‰
- `core_idea`: æ ¸å¿ƒä¸»é¢˜ï¼ˆé€‰å¡«ï¼Œæœ€å¤š100å­—ï¼‰

#### 2.2 æˆåŠŸå“åº”
```json
{
    "success": true,
    "message": "æ–‡ç« ç”ŸæˆæˆåŠŸ",
    "data": {
        "title": "æ­ç§˜AIå¦‚ä½•å®šåˆ¶ä¸ªæ€§åŒ–å­¦ä¹ ï¼Œæå‡å­¦ç”Ÿæˆç»©çš„3å¤§å…³é”®",
        "content": "# æ­ç§˜AIå¦‚ä½•å®šåˆ¶ä¸ªæ€§åŒ–å­¦ä¹ ...",
        "directions": [
            "ä¸ªæ€§åŒ–å­¦ä¹ ï¼šAIå¦‚ä½•æ ¹æ®å­¦ç”Ÿéœ€æ±‚å®šåˆ¶æ•™è‚²å†…å®¹",
            "æ•™å¸ˆè§’è‰²è½¬å˜ï¼šAIåœ¨è¯¾å ‚ä¸­çš„è¾…åŠ©ä¸æ›¿ä»£",
            "æœªæ¥æŠ€èƒ½åŸ¹å…»ï¼šAIæ—¶ä»£éœ€è¦çš„æ ¸å¿ƒç´ å…»"
        ],
        "file_path": "output/202312211234.md"
    }
}
```

#### 2.3 é”™è¯¯å“åº”
```json
{
    "code": 400,
    "message": "è¯·æ±‚å‚æ•°é”™è¯¯",
    "details": "æ–‡ç« æè¿°ä¸èƒ½ä¸ºç©º"
}
```

### 3. é”™è¯¯ç è¯´æ˜
- 400: è¯·æ±‚å‚æ•°é”™è¯¯
- 404: èµ„æºæœªæ‰¾åˆ°
- 500: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### 4. æ•°æ®éªŒè¯è§„åˆ™
- æ–‡ç« æè¿°ï¼š
  * å¿…å¡«å­—æ®µ
  * æœ€å°é•¿åº¦ï¼š5ä¸ªå­—ç¬¦
  * æœ€å¤§é•¿åº¦ï¼š1000ä¸ªå­—ç¬¦
- æ ¸å¿ƒä¸»é¢˜ï¼š
  * é€‰å¡«å­—æ®µ
  * æœ€å¤§é•¿åº¦ï¼š100ä¸ªå­—ç¬¦

### 5. å“åº”å­—æ®µè¯´æ˜
- `success`: è¯·æ±‚æ˜¯å¦æˆåŠŸ
- `message`: å“åº”æ¶ˆæ¯
- `data`: æ–‡ç« æ•°æ®
  * `title`: ç”Ÿæˆçš„æ–‡ç« æ ‡é¢˜
  * `content`: ç”Ÿæˆçš„æ–‡ç« å†…å®¹ï¼ˆMarkdownæ ¼å¼ï¼‰
  * `directions`: æ–‡ç« çš„å†™ä½œæ–¹å‘åˆ—è¡¨
  * `file_path`: æ–‡ç« ä¿å­˜çš„æ–‡ä»¶è·¯å¾„

## ä½¿ç”¨Docker Composeéƒ¨ç½²

1. ç¡®ä¿å·²å®‰è£…Dockerå’ŒDocker Compose
   ```bash
   docker --version
   docker-compose --version
   ```

2. é…ç½®ç¯å¢ƒå˜é‡
   ```bash
   cp ./backend/.env.example ./backend/.env
   # ç¼–è¾‘.envæ–‡ä»¶ï¼Œè®¾ç½®MONICA_API_KEY
   ```

3. æ„å»ºå’Œå¯åŠ¨æœåŠ¡
   ```bash
   # æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨
   docker-compose up --build

   # åå°è¿è¡Œ
   docker-compose up -d --build
   ```

4. è®¿é—®æœåŠ¡
   - å‰ç«¯é¡µé¢ï¼šhttp://localhost:5173
   - åç«¯APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs

5. åœæ­¢æœåŠ¡
   ```bash
   # åœæ­¢å¹¶ç§»é™¤å®¹å™¨
   docker-compose down

   # åœæ­¢å¹¶ç§»é™¤å®¹å™¨åŠé•œåƒ
   docker-compose down --rmi all
   ```

### Dockerå¼€å‘æç¤º

1. æŸ¥çœ‹å®¹å™¨æ—¥å¿—
   ```bash
   # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¥å¿—
   docker-compose logs

   # æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
   docker-compose logs backend
   docker-compose logs frontend
   ```

2. è¿›å…¥å®¹å™¨
   ```bash
   # è¿›å…¥åç«¯å®¹å™¨
   docker-compose exec backend bash

   # è¿›å…¥å‰ç«¯å®¹å™¨
   docker-compose exec frontend sh
   ```

3. é‡å¯æœåŠ¡
   ```bash
   # é‡å¯æ‰€æœ‰æœåŠ¡
   docker-compose restart

   # é‡å¯ç‰¹å®šæœåŠ¡
   docker-compose restart backend
   docker-compose restart frontend
   ```

4. å¼€å‘æ¨¡å¼
   - å·²é…ç½®çƒ­é‡è½½ï¼Œä¿®æ”¹ä»£ç åä¼šè‡ªåŠ¨æ›´æ–°
   - å‰ç«¯ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨ç¼–è¯‘
   - åç«¯ä»£ç ä¿®æ”¹ä¼šè‡ªåŠ¨é‡å¯æœåŠ¡

5. å¸¸è§é—®é¢˜
   - å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´ç›®å½•æƒé™ï¼š
     ```bash
     sudo chown -R $USER:$USER .
     ```
   - å¦‚æœç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥åœ¨docker-compose.ymlä¸­ä¿®æ”¹ç«¯å£æ˜ å°„

## å¿«é€Ÿå¼€å§‹

### 1. Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•çš„å¯åŠ¨æ–¹å¼ï¼Œç¡®ä¿ä½ å·²å®‰è£…ï¼š
- Docker >= 20.10.0
- Docker Compose >= 2.0.0

```bash
# 1. å…‹éš†é¡¹ç›®
git clone [é¡¹ç›®åœ°å€]
cd blog-by-desc

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½® MONICA_API_KEY

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d --build

# 4. è®¿é—®æœåŠ¡
# å‰ç«¯ç•Œé¢ï¼šhttp://localhost:5173
# APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
```

### 2. æœ¬åœ°å¼€å‘ç¯å¢ƒï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³åœ¨æœ¬åœ°å¼€å‘ï¼Œè¯·å‚è€ƒ[å¼€å‘ç¯å¢ƒè®¾ç½®](#å¼€å‘ç¯å¢ƒè®¾ç½®)éƒ¨åˆ†ã€‚

## Dockeréƒ¨ç½²è¯¦è§£

### ç›®å½•ç»“æ„
```
blog-by-desc/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ .dockerignore    # åç«¯æ„å»ºå¿½ç•¥è§„åˆ™
â”‚   â””â”€â”€ ...
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ .dockerignore    # å‰ç«¯æ„å»ºå¿½ç•¥è§„åˆ™
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ backend.Dockerfile
â”‚   â””â”€â”€ frontend.Dockerfile
â””â”€â”€ docker-compose.yml
```

### éƒ¨ç½²è¯´æ˜

1. æœåŠ¡ç»„ä»¶
   - åç«¯æœåŠ¡ï¼ˆPython FastAPIï¼‰
     * è¿è¡Œåœ¨ 8000 ç«¯å£
     * ä½¿ç”¨érootç”¨æˆ·è¿è¡Œ
     * æ”¯æŒçƒ­é‡è½½å¼€å‘
   - å‰ç«¯æœåŠ¡ï¼ˆVue.jsï¼‰
     * è¿è¡Œåœ¨ 5173 ç«¯å£
     * æ”¯æŒçƒ­æ›´æ–°
     * è‡ªåŠ¨ç¼–è¯‘

2. æ•°æ®æŒä¹…åŒ–
   ```yaml
   volumes:
     - ./backend:/app/backend:ro  # æºä»£ç ï¼ˆåªè¯»ï¼‰
     - ./output:/app/output       # ç”Ÿæˆçš„æ–‡ç« 
     - ./logs:/app/logs          # æ—¥å¿—æ–‡ä»¶
   ```


### å¸¸ç”¨æ“ä½œ

1. æœåŠ¡ç®¡ç†
   ```bash
   # å¯åŠ¨æœåŠ¡
   docker-compose up -d

   # åœæ­¢æœåŠ¡
   docker-compose down

   # é‡å¯æœåŠ¡
   docker-compose restart

   # æŸ¥çœ‹æ—¥å¿—
   docker-compose logs -f
   ```

2. å¼€å‘æ¨¡å¼
   ```bash
   # å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆå¸¦å®æ—¶æ—¥å¿—ï¼‰
   docker-compose up

   # é‡æ–°æ„å»ºï¼ˆä»£ç æ›´æ–°åï¼‰
   docker-compose up --build
   ```

3. å®¹å™¨ç®¡ç†
   ```bash
   # è¿›å…¥å®¹å™¨
   docker-compose exec backend bash
   docker-compose exec frontend sh

   # æŸ¥çœ‹å®¹å™¨çŠ¶æ€
   docker-compose ps
   ```

4. æ–‡ä»¶æƒé™ï¼ˆå¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼‰
   ```bash
   # è®¾ç½®ç›®å½•æƒé™
   sudo chown -R $USER:$USER .
   sudo chmod -R 755 .
   ```

### æ•…éšœæ’é™¤

1. å®¹å™¨æ— æ³•å¯åŠ¨
   - æ£€æŸ¥ç«¯å£å ç”¨ï¼š`lsof -i :8000` å’Œ `lsof -i :5173`
   - æ£€æŸ¥æ—¥å¿—ï¼š`docker-compose logs`
   - ç¡®è®¤ç¯å¢ƒå˜é‡å·²æ­£ç¡®è®¾ç½®

# APIè¯·æ±‚è¿‡ç¨‹
æµè§ˆå™¨ 
-> http://localhost:3000/api/blog/generate
-> Vite ä»£ç†
-> http://backend:3001/blog/generate  (å»æ‰äº†/apiå‰ç¼€)
-> FastAPI è·¯ç”±å¤„ç†
-> è¿”å›å“åº”
